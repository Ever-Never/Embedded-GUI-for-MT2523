<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>MT2523 API Reference: GATTS Service</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MediaTek.PNG"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MT2523 API Reference
   &#160;<span id="projectnumber">LinkIt SDK v4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___bluetooth_services___g_a_t_t.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a> &#124;
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">GATTS Service<div class="ingroups"><a class="el" href="group___bluetooth___services___group.html">Bluetooth Services</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This section provides APIs to set GAP service and characteristics information, such as device name, appearance, peripheral preferred connection parameters and central address resolution.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<p>This section provides APIs to set GAP service and characteristics information, such as device name, appearance, peripheral preferred connection parameters and central address resolution. </p>
<h1>Terms and Acronyms </h1>
<table class="doxtable">
<tr>
<th>Terms </th><th>Details  </th></tr>
<tr>
<td><b>GAP</b> </td><td>Generic Access Profile. This profile defines the generic procedures related to discovery of Bluetooth enabled devices and link management aspects of connecting to the Bluetooth enabled devices. It also defines procedures related to the use of different security levels. </td></tr>
<tr>
<td><b>GATTS</b> </td><td>GATT Server, is the device that accepts incoming commands and requests from the GATT client. </td></tr>
<tr>
<td><b>PPCP</b> </td><td>Peripheral Preferred Connection Parameters, contains the preferred connection parameters of Peripheral. </td></tr>
</table>
<h1><a class="anchor" id="gatts_service_api_usage"></a>
How to use this module</h1>
<ul>
<li>Step 1. Initialize the GATTS service.<ul>
<li>Sample Code: <div class="fragment"><div class="line"><a class="code" href="group___bluetooth_services___g_a_t_t.html#gae118e6a091ce66a284d8ab0d608570b3">bt_gatts_service_init</a>();</div></div><!-- fragment --></li>
</ul>
</li>
<li>Step 2. Use GATTS Service APIs to set device name, appearance, peripheral preferred connection parameters and central address resolution characteristic of GAP service.<ul>
<li>Sample code: <div class="fragment"><div class="line">uint8_t car_flag = 1;</div><div class="line">uint16_t appearance = 0x1234;</div><div class="line"><span class="keywordtype">char</span>* local_device_name = <span class="stringliteral">&quot;HB_DEVICE_LE&quot;</span>;</div><div class="line"><a class="code" href="structbt__gatts__le__gap__ppcp__t.html">bt_gatts_le_gap_ppcp_t</a>   gap_conn_param;</div><div class="line">gap_conn_param.<a class="code" href="structbt__gatts__le__gap__ppcp__t.html#ac927a642ee2203f875fcce1eabb5fa64">min_conn_interval</a> = 0x0010;</div><div class="line">gap_conn_param.<a class="code" href="structbt__gatts__le__gap__ppcp__t.html#a0aec1884f340406a5194b772da017d7b">max_conn_interval</a> = 0x0020;</div><div class="line">gap_conn_param.<a class="code" href="structbt__gatts__le__gap__ppcp__t.html#a39219ac00a0e8ed843ee32b9df8be11e">slave_latency</a> = 0x00;</div><div class="line">gap_conn_param.<a class="code" href="structbt__gatts__le__gap__ppcp__t.html#ab9a2dab79f1bab2d97d672571c060bbc">supervision_timeout</a> = 0x0258;</div><div class="line"><a class="code" href="group___bluetooth_services___g_a_t_t.html#ga674853821568a66c92c319369f0b9683">bt_gatts_service_set_gap_device_name</a>((<span class="keyword">const</span> uint8_t *)local_device_name, strlen(local_device_name));</div><div class="line"><a class="code" href="group___bluetooth_services___g_a_t_t.html#ga60d3da1b2d0b4186625f32d7afbad615">bt_gatts_service_set_gap_appearance</a>(appearance);</div><div class="line"><a class="code" href="group___bluetooth_services___g_a_t_t.html#ga0dda58c96885565301d4f01815ed723e">bt_gatts_service_set_gap_ppcp</a>(&amp;gap_conn_param);</div><div class="line"><a class="code" href="group___bluetooth_services___g_a_t_t.html#gaf33a549e776e68a0b8901c9c4d7b1098">bt_gatts_service_set_gap_central_address_resolution</a>(car_flag);</div></div><!-- fragment --> </li>
</ul>
</li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae118e6a091ce66a284d8ab0d608570b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bluetooth_services___g_a_t_t.html#gae118e6a091ce66a284d8ab0d608570b3">bt_gatts_service_init</a> (void)</td></tr>
<tr class="memdesc:gae118e6a091ce66a284d8ab0d608570b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initializes the GATTS service.  <a href="#gae118e6a091ce66a284d8ab0d608570b3">More...</a><br /></td></tr>
<tr class="separator:gae118e6a091ce66a284d8ab0d608570b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga674853821568a66c92c319369f0b9683"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___bluetoothbt__primary__type__define.html#ga6bf23e2845d8aec21a15506e256eff4e">bt_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bluetooth_services___g_a_t_t.html#ga674853821568a66c92c319369f0b9683">bt_gatts_service_set_gap_device_name</a> (const uint8_t *device_name, uint16_t length)</td></tr>
<tr class="memdesc:ga674853821568a66c92c319369f0b9683"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets Device Name Characteristic.  <a href="#ga674853821568a66c92c319369f0b9683">More...</a><br /></td></tr>
<tr class="separator:ga674853821568a66c92c319369f0b9683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e697390f49498740acec20c328472db"><td class="memItemLeft" align="right" valign="top">const uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bluetooth_services___g_a_t_t.html#ga9e697390f49498740acec20c328472db">bt_gatts_service_get_gap_device_name</a> (void)</td></tr>
<tr class="memdesc:ga9e697390f49498740acec20c328472db"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function gets the current Device Name Characteristic value.  <a href="#ga9e697390f49498740acec20c328472db">More...</a><br /></td></tr>
<tr class="separator:ga9e697390f49498740acec20c328472db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga60d3da1b2d0b4186625f32d7afbad615"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bluetooth_services___g_a_t_t.html#ga60d3da1b2d0b4186625f32d7afbad615">bt_gatts_service_set_gap_appearance</a> (uint16_t appearance)</td></tr>
<tr class="memdesc:ga60d3da1b2d0b4186625f32d7afbad615"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets Appearance Characteristic.  <a href="#ga60d3da1b2d0b4186625f32d7afbad615">More...</a><br /></td></tr>
<tr class="separator:ga60d3da1b2d0b4186625f32d7afbad615"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0dda58c96885565301d4f01815ed723e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___bluetoothbt__primary__type__define.html#ga6bf23e2845d8aec21a15506e256eff4e">bt_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bluetooth_services___g_a_t_t.html#ga0dda58c96885565301d4f01815ed723e">bt_gatts_service_set_gap_ppcp</a> (<a class="el" href="structbt__gatts__le__gap__ppcp__t.html">bt_gatts_le_gap_ppcp_t</a> *ppcp_param)</td></tr>
<tr class="memdesc:ga0dda58c96885565301d4f01815ed723e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets Peripheral Preferred Connection Parameters Characteristic.  <a href="#ga0dda58c96885565301d4f01815ed723e">More...</a><br /></td></tr>
<tr class="separator:ga0dda58c96885565301d4f01815ed723e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf33a549e776e68a0b8901c9c4d7b1098"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___bluetoothbt__primary__type__define.html#ga6bf23e2845d8aec21a15506e256eff4e">bt_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bluetooth_services___g_a_t_t.html#gaf33a549e776e68a0b8901c9c4d7b1098">bt_gatts_service_set_gap_central_address_resolution</a> (uint8_t flag)</td></tr>
<tr class="memdesc:gaf33a549e776e68a0b8901c9c4d7b1098"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets Central Address Resolution Characteristic.  <a href="#gaf33a549e776e68a0b8901c9c4d7b1098">More...</a><br /></td></tr>
<tr class="separator:gaf33a549e776e68a0b8901c9c4d7b1098"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gaec4aa9412ba34ddaadf3dae242c9c5b9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaec4aa9412ba34ddaadf3dae242c9c5b9"></a>
const <a class="el" href="structbt__gatts__service__t.html">bt_gatts_service_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>bt_if_gatt_service</b></td></tr>
<tr class="separator:gaec4aa9412ba34ddaadf3dae242c9c5b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga291b26eb2c9222bfc56d22dfb2b0417d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga291b26eb2c9222bfc56d22dfb2b0417d"></a>
const <a class="el" href="structbt__gatts__service__t.html">bt_gatts_service_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>bt_if_gap_service</b></td></tr>
<tr class="separator:ga291b26eb2c9222bfc56d22dfb2b0417d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___g_a_t_t_s___service__struct"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_t_t_s___service__struct.html">Struct</a></td></tr>
<tr class="memdesc:group___g_a_t_t_s___service__struct"><td class="mdescLeft">&#160;</td><td class="mdescRight">This section defines structures for the GATTS service. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga9e697390f49498740acec20c328472db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t* bt_gatts_service_get_gap_device_name </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function gets the current Device Name Characteristic value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">void.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>device name is a pointer to a UTF-8 encoded string. </dd></dl>

</div>
</div>
<a class="anchor" id="gae118e6a091ce66a284d8ab0d608570b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bt_gatts_service_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initializes the GATTS service. </p>
<p>It is recommended to call this API once during the bootup. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">void.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void. </dd></dl>

</div>
</div>
<a class="anchor" id="ga60d3da1b2d0b4186625f32d7afbad615"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bt_gatts_service_set_gap_appearance </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>appearance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets Appearance Characteristic. </p>
<p>It should be called after <a class="el" href="group___bluetooth_services___g_a_t_t.html#gae118e6a091ce66a284d8ab0d608570b3">bt_gatts_service_init()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">appearance</td><td>is the Appearance Characteristic value, it shall be 2 octets in length. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf33a549e776e68a0b8901c9c4d7b1098"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___bluetoothbt__primary__type__define.html#ga6bf23e2845d8aec21a15506e256eff4e">bt_status_t</a> bt_gatts_service_set_gap_central_address_resolution </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets Central Address Resolution Characteristic. </p>
<p>It should be called after <a class="el" href="group___bluetooth_services___g_a_t_t.html#gae118e6a091ce66a284d8ab0d608570b3">bt_gatts_service_init()</a>. This function should be called by Central role only to define whether the device supports privacy with the address resolution. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">flag</td><td>is a 1 octet value, 0 means the address resolution is not supported in this device, 1 means the address solution is supported in this device, the reserved value range is from 2 to 255. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BT_STATUS_SUCCESS, the resolution is set successfully. BT_STATUS_FAIL, the resolution failed to set, an invalid parameter is supplied. </dd></dl>

</div>
</div>
<a class="anchor" id="ga674853821568a66c92c319369f0b9683"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___bluetoothbt__primary__type__define.html#ga6bf23e2845d8aec21a15506e256eff4e">bt_status_t</a> bt_gatts_service_set_gap_device_name </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>device_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets Device Name Characteristic. </p>
<p>It should be called after <a class="el" href="group___bluetooth_services___g_a_t_t.html#gae118e6a091ce66a284d8ab0d608570b3">bt_gatts_service_init()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">device_name</td><td>is a pointer to a UTF-8 encoded string. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>is the length of a UTF-8 string pointed to by device_name in octets (shall be 0 to 248 octets). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BT_STATUS_SUCCESS, the device name is set successfully. BT_STATUS_FAIL, the device name failed to set, a NULL pointer or invalid length is supplied. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0dda58c96885565301d4f01815ed723e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___bluetoothbt__primary__type__define.html#ga6bf23e2845d8aec21a15506e256eff4e">bt_status_t</a> bt_gatts_service_set_gap_ppcp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbt__gatts__le__gap__ppcp__t.html">bt_gatts_le_gap_ppcp_t</a> *&#160;</td>
          <td class="paramname"><em>ppcp_param</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets Peripheral Preferred Connection Parameters Characteristic. </p>
<p>It should be called after (). This function should be called by Peripheral role only to set the Peripheral Preferred Connection Parameters. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ppcp_param</td><td>is a pointer to the <a class="el" href="structbt__gatts__le__gap__ppcp__t.html">bt_gatts_le_gap_ppcp_t</a> structure with the desired parameter. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BT_STATUS_SUCCESS, the PPCP value is set successfully. BT_STATUS_FAIL, the PPCP value failed to set, an invalid parameter is supplied. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Nov 15 2017 19:29:11 for MT2523 API Reference by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
