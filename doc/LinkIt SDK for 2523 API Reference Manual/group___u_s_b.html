<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>MT2523 API Reference: USB</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MediaTek.PNG"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MT2523 API Reference
   &#160;<span id="projectnumber">LinkIt SDK v4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___u_s_b.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">USB<div class="ingroups"><a class="el" href="group___h_a_l.html">HAL</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This section introduces the USB APIs including terms and acronyms, supported features, software architecture, details on how to use this driver, enumerations, structures and functions.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<p>This section introduces the USB APIs including terms and acronyms, supported features, software architecture, details on how to use this driver, enumerations, structures and functions. </p>
<table class="doxtable">
<tr>
<th>Terms </th><th>Details  </th></tr>
<tr>
<td><b>USB</b> </td><td>Universal Serial Bus. USB was designed to standardize the connection of computer peripherals (including keyboards, pointing devices, digital cameras, printers, portable media players, disk drives and network adapters) to personal computers, both to communicate and to supply electric power. It has become commonplace on other devices, such as smart phones, PDAs and video game consoles.[3] USB has effectively replaced a variety of earlier interfaces, such as serial and parallel ports, as well as separate power chargers for portable devices. For more information, please refer to <a href="https://en.wikipedia.org/wiki/USB">an introduction to the USB in Wikipedia</a>. </td></tr>
<tr>
<td><b>PIO</b> </td><td>Programmed Input / Output. It is a transmission mode to use CPU to move data. </td></tr>
</table>
<h1><a class="anchor" id="HAL_USB_Features_Chapter"></a>
Supported features.</h1>
<ul>
<li><b>USB</b> <b>2.0</b> <b>High-Speed</b> <b>Device</b> <b>Controller</b> <br />
 In High-Speed mode, the USB controller is configured for supporting two endpoints to receive packets and four endpoints to send packets except for endpoint 0. These endpoints can be individually configured in the software to handle bulk transfers, interrupt transfers or isochronous transfers. There are four DMA channels and the embedded RAM size is 2,304 bytes. The embedded RAM can be dynamically configured for each endpoint.</li>
</ul>
<h1><a class="anchor" id="HAL_USB_Architechture_Chapter"></a>
Software architecture of the USB driver.</h1>
<p>The software architecture of the USB driver is shown in the diagram below. </p><div class="image">
<img src="hal_usb_archi.png" alt="hal_usb_archi.png"/>
</div>
<h1><a class="anchor" id="HAL_USB_Driver_Usage_Chapter"></a>
How to use this driver.</h1>
<ul>
<li>Initialize the USB hardware. <br />
<ul>
<li>Step1: Call <a class="el" href="group___u_s_b.html#gad8a705bd71f6790b70028c0f140b7d83" title="This function initializes the USB hardware module. ">hal_usb_init()</a> to initialize the USB hardware if it has not been initialized after powering on.</li>
<li>Step2: Call <a class="el" href="group___u_s_b.html#ga5eca82ee5e05b25605a66b9d833913c6" title="This function initializes the USB HAL driver. ">hal_usb_configure_driver()</a> to set up the HAL driver and register the callback functions.</li>
<li>Step3: Call <a class="el" href="group___u_s_b.html#ga9070ba013bc663322da617603de752ae" title="This function applies the USB hardware soft reset. ">hal_usb_reset_hardware()</a> and <a class="el" href="group___u_s_b.html#gabdc7f181d54cad49bb7128795710ace8" title="This function applies USB FIFO address reset at all endpoints. ">hal_usb_reset_fifo()</a> to soft reset the hardware.</li>
<li>Step4: Call <a class="el" href="group___u_s_b.html#ga0c8b8e69464d85a0ccc4af5624674b43" title="This function pulls the USB DP pin to high. ">hal_usb_pull_up_dp_line()</a> to pull USB D+ to 3.3v and start USB connection.</li>
<li>sample code: <div class="fragment"><div class="line">usb_hw_init(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="comment">//USB hardware initialization.</span></div><div class="line">    <a class="code" href="group___u_s_b.html#gad8a705bd71f6790b70028c0f140b7d83">hal_usb_init</a>();</div><div class="line"></div><div class="line">    <span class="comment">//Register reset and ep0 interrupt handlers for the driver settings.</span></div><div class="line">    <a class="code" href="group___u_s_b.html#ga5eca82ee5e05b25605a66b9d833913c6">hal_usb_configure_driver</a>();</div><div class="line">    <a class="code" href="group___u_s_b.html#gadb109a6d2b465f988b514a52f71093e3">hal_usb_register_driver_callback</a>(<a class="code" href="group__hal__usb__enum.html#ggad0a28abc9ec7f63d5eae70993fb2fa31a411bf77da64c40f7c1751e2bfca55b70">HAL_USB_DRV_HDLR_RESET</a>, 0, USB_Reset);</div><div class="line">    <a class="code" href="group___u_s_b.html#gadb109a6d2b465f988b514a52f71093e3">hal_usb_register_driver_callback</a>(<a class="code" href="group__hal__usb__enum.html#ggad0a28abc9ec7f63d5eae70993fb2fa31a19276dc764929f25de2b7697d1b5e1de">HAL_USB_DRV_HDLR_EP0</a>, 0, USB_Endpoint0_Hdlr);</div><div class="line">    <a class="code" href="group___u_s_b.html#gadb109a6d2b465f988b514a52f71093e3">hal_usb_register_driver_callback</a>(<a class="code" href="group__hal__usb__enum.html#ggad0a28abc9ec7f63d5eae70993fb2fa31a0fc6cb33eb7ac95e305f8d682feafa64">HAL_USB_DRV_HDLR_SUSPEND</a>, 0, USB_Suspend);</div><div class="line"></div><div class="line">    <span class="comment">//USB hardware soft reset.</span></div><div class="line">    <a class="code" href="group___u_s_b.html#ga9070ba013bc663322da617603de752ae">hal_usb_reset_hardware</a>();</div><div class="line">    <span class="comment">//USB FIFO data reset.</span></div><div class="line">    <a class="code" href="group___u_s_b.html#gabdc7f181d54cad49bb7128795710ace8">hal_usb_reset_fifo</a>();</div><div class="line">    <span class="comment">//Set D+ to high.</span></div><div class="line">    <a class="code" href="group___u_s_b.html#ga0c8b8e69464d85a0ccc4af5624674b43">hal_usb_pull_up_dp_line</a>();</div><div class="line">}</div></div><!-- fragment --></li>
</ul>
</li>
<li>De-initialize the USB hardware. <br />
<ul>
<li>Step1: Call <a class="el" href="group___u_s_b.html#ga956a8ffe2f14cb2498a431abb738a313" title="This function releases the USB hardware resource. ">hal_usb_deinit()</a> to power the USB hardware off. <div class="fragment"><div class="line">usb_hw_deinit(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="comment">//Power off the USB hardware.</span></div><div class="line">    <a class="code" href="group___u_s_b.html#ga956a8ffe2f14cb2498a431abb738a313">hal_usb_deinit</a>();</div><div class="line">}</div></div><!-- fragment --></li>
</ul>
</li>
<li>Set up the USB endpoint. <br />
<ul>
<li>Step1: Call <a class="el" href="group___u_s_b.html#gab4a410fb736f33b557330b44c5d46fab" title="This function initializes the USB endpoint in TX direction. ">hal_usb_init_tx_endpoint()</a> to initialize the basic settings for the endpoint.</li>
<li>Step2: Call <a class="el" href="group___u_s_b.html#gac6b4d7c9a96ee41b1ffd8c6558eb12b2" title="This function enables the USB endpoint TX interrupt. ">hal_usb_enable_tx_endpoint()</a> to enable the endpoint interrupt. <div class="fragment"><div class="line">usb_ep_init(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> ep_num = 1;</div><div class="line">    <span class="keywordtype">int</span> wMaxPacketSize = 512;</div><div class="line">    <span class="keywordtype">bool</span> double_fifo = <span class="keyword">false</span>;</div><div class="line">    <span class="keywordtype">bool</span> flush_fifo = <span class="keyword">true</span>;</div><div class="line"></div><div class="line">    <span class="comment">//Initialize enpoint as BULK.</span></div><div class="line">    <a class="code" href="group___u_s_b.html#gab4a410fb736f33b557330b44c5d46fab">hal_usb_init_tx_endpoint</a>(ep_num, wMaxPacketSize, HAL_USB_ENDPT_BULK, double_fifo);</div><div class="line">    <a class="code" href="group___u_s_b.html#ga3df1cbd7de9ef58ad8b37777489f2007">hal_usb_init_rx_endpoint</a>(ep_num, wMaxPacketSize, HAL_USB_ENDPT_BULK, double_fifo);</div><div class="line">    <a class="code" href="group___u_s_b.html#gac6b4d7c9a96ee41b1ffd8c6558eb12b2">hal_usb_enable_tx_endpoint</a>(ep_num, HAL_USB_ENDPT_BULK, <a class="code" href="group__hal__usb__enum.html#gga5f0b8667d9b50c62ec334c98e5d79c6caf01cb1791159d1ff631ad8564bb2a0d5">HAL_USB_EP_USE_NO_DMA</a>, flush_fifo);</div><div class="line">    <a class="code" href="group___u_s_b.html#ga55618518eb2ce44acd880b454fd940e2">hal_usb_enable_rx_endpoint</a>(ep_num, HAL_USB_ENDPT_BULK, <a class="code" href="group__hal__usb__enum.html#gga5f0b8667d9b50c62ec334c98e5d79c6caf01cb1791159d1ff631ad8564bb2a0d5">HAL_USB_EP_USE_NO_DMA</a>, flush_fifo);</div><div class="line">}</div></div><!-- fragment --></li>
</ul>
</li>
<li>USB PIO data read. <br />
<ul>
<li>Step1: Call <a class="el" href="group___u_s_b.html#gabe6f994d46f5b6d44a6b964c5fc5e195" title="This function gets the data packet length at the RX endpoint. ">hal_usb_get_rx_packet_length()</a> to get the data length in the USB FIFO.</li>
<li>Step2: Call <a class="el" href="group___u_s_b.html#gaee62d7029bdacd64599348bc05ea6863" title="This function reads the USB data from FIFO. ">hal_usb_read_endpoint_fifo()</a> to read the USB FIFO data and save in a buffer.</li>
<li>Step3: Call <a class="el" href="group___u_s_b.html#gae1b3ac35aa6e9cb6d60b6978dc2063c3" title="This function sets the USB packet ready once the data is fully read from FIFO. ">hal_usb_set_endpoint_rx_ready()</a> to notify that the RX is ready to receive data packet. <div class="fragment"><div class="line">usb_fifo_read(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">   <span class="keywordtype">int</span> nCount;</div><div class="line">   <span class="keywordtype">int</span> ep_num = 1;</div><div class="line">   <span class="keywordtype">char</span> data_buffer[512];</div><div class="line"></div><div class="line">   <span class="comment">//Read data count in FIFO.</span></div><div class="line">   nCount = <a class="code" href="group___u_s_b.html#gabe6f994d46f5b6d44a6b964c5fc5e195">hal_usb_get_rx_packet_length</a>(ep_num);</div><div class="line"></div><div class="line">   <span class="comment">//Read data from FIFO to data_buffer.</span></div><div class="line">   <a class="code" href="group___u_s_b.html#gaee62d7029bdacd64599348bc05ea6863">hal_usb_read_endpoint_fifo</a>(ep_num, nCount, data_buffer);</div><div class="line"></div><div class="line">   <span class="comment">//Notify the USB hardware that the RX is ready to receive the data packet.</span></div><div class="line">   <a class="code" href="group___u_s_b.html#gae1b3ac35aa6e9cb6d60b6978dc2063c3">hal_usb_set_endpoint_rx_ready</a>(ep_num);</div><div class="line">}</div></div><!-- fragment --></li>
</ul>
</li>
<li>USB PIO data write. <br />
<ul>
<li>Step1: Call <a class="el" href="group___u_s_b.html#ga44bd3c1a6c7d3d5752bd48f4a116a10d" title="This function writes the USB data to FIFO. ">hal_usb_write_endpoint_fifo()</a> to write data to the USB FIFO.</li>
<li>Step2: Call <a class="el" href="group___u_s_b.html#ga0dac054d8c02c14d238b742bb3a37f56" title="This function sets the USB packet ready once the data is fully written into FIFO. ...">hal_usb_set_endpoint_tx_ready()</a> to notify that the data packet is ready to send. <div class="fragment"><div class="line"><span class="preprocessor">#define DATA_LENGTH 10</span></div><div class="line">usb_fifo_write(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">   <span class="keywordtype">int</span> nCount = DATA_LENGTH;</div><div class="line">   <span class="keywordtype">int</span> ep_num = 1;</div><div class="line">   <span class="keywordtype">char</span> data_buffer[DATA_LENGTH];</div><div class="line"></div><div class="line">   <span class="comment">//Write data to USB FIFO.</span></div><div class="line">   <a class="code" href="group___u_s_b.html#ga44bd3c1a6c7d3d5752bd48f4a116a10d">hal_usb_write_endpoint_fifo</a>(ep_num, nCount, data_buffer);</div><div class="line"></div><div class="line">   <span class="comment">//Notify the USB hardware that the data packet is ready to send.</span></div><div class="line">   <a class="code" href="group___u_s_b.html#ga0dac054d8c02c14d238b742bb3a37f56">hal_usb_set_endpoint_tx_ready</a>(ep_num);</div><div class="line">}</div></div><!-- fragment --></li>
</ul>
</li>
<li>USB Endpoint0 Handler. <br />
<ul>
<li>Step1: Call <a class="el" href="group___u_s_b.html#gaee62d7029bdacd64599348bc05ea6863" title="This function reads the USB data from FIFO. ">hal_usb_read_endpoint_fifo()</a> to read USB FIFO data and save in a buffer.</li>
<li>Step2: Check parameter usb_cmd.bRequest Call <a class="el" href="group___u_s_b.html#ga1cf6a5db9726175e2da540bfc8dd2253" title="This function configures the USB address. ">hal_usb_set_address()</a> to set the USB Address data or call <a class="el" href="group___u_s_b.html#gab1b78bc6734893f746c432bbc3403cca" title="This function sets the USB endpoint n to stall, flush or clear data toggle. ">hal_usb_set_endpoint_stall()</a> to set/clear the endpoint stall. <div class="fragment"><div class="line"><span class="keywordtype">void</span> USB_Endpoint0_Handler (<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">   <span class="keywordtype">bool</span> stall = <span class="keyword">false</span>;</div><div class="line">   <span class="comment">//Read ep0 data.</span></div><div class="line">   <a class="code" href="group___u_s_b.html#gaee62d7029bdacd64599348bc05ea6863">hal_usb_read_endpoint_fifo</a>(0, 8, &amp;usb_cmd);</div><div class="line">   <span class="keywordflow">if</span> ((usb_cmd.bmRequestType &amp; USB_CMD_TYPEMASK) == USB_CMD_STDREQ)</div><div class="line">   {</div><div class="line">       <span class="keywordflow">switch</span>(usb_cmd.bRequest)</div><div class="line">       {</div><div class="line">        <span class="keywordflow">case</span> USB_SET_ADDRESS:</div><div class="line">             <a class="code" href="group___u_s_b.html#ga1cf6a5db9726175e2da540bfc8dd2253">hal_usb_set_address</a>(usb_cmd.FAddr, <a class="code" href="group__hal__usb__enum.html#ggac1c6f098b46b3e3b3cc9677a7055800ead186253fc177b38a9c04d75f0cfa2326">HAL_USB_SET_ADDR_DATA</a>);</div><div class="line">             <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> USB_SET_FEATURE:</div><div class="line">             <span class="keywordflow">if</span>(usb_cmd.wValue) == USB_FTR_EPHALT)</div><div class="line">             {</div><div class="line">                 stall = <span class="keyword">true</span>;</div><div class="line">                 <span class="keywordflow">if</span>(pcmd-&gt;wIndex&amp;0x80)</div><div class="line">                    <a class="code" href="group___u_s_b.html#gab1b78bc6734893f746c432bbc3403cca">hal_usb_set_endpoint_stall</a>((usb_cmd.wIndex&amp; 0x0f), HAL_USB_EP_TX_DIR, stall);</div><div class="line">                 <span class="keywordflow">else</span></div><div class="line">                    <a class="code" href="group___u_s_b.html#gab1b78bc6734893f746c432bbc3403cca">hal_usb_set_endpoint_stall</a>((usb_cmd.wIndex&amp; 0x0f), HAL_USB_EP_RX_DIR, stall);</div><div class="line">             }</div><div class="line">             <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> USB_CLEAR_FEATURE:</div><div class="line">             <span class="keywordflow">if</span>((usb_cmd.wValue) == USB_FTR_EPHALT))</div><div class="line">             {</div><div class="line">                 <span class="keywordflow">if</span>(pcmd-&gt;wIndex&amp;0x80)</div><div class="line">                    <a class="code" href="group___u_s_b.html#gab1b78bc6734893f746c432bbc3403cca">hal_usb_set_endpoint_stall</a>((usb_cmd.wIndex&amp; 0x0f), HAL_USB_EP_TX_DIR, stall);</div><div class="line">                 <span class="keywordflow">else</span></div><div class="line">                    <a class="code" href="group___u_s_b.html#gab1b78bc6734893f746c432bbc3403cca">hal_usb_set_endpoint_stall</a>((usb_cmd.wIndex&amp; 0x0f), HAL_USB_EP_RX_DIR, stall);</div><div class="line">             }</div><div class="line">             <span class="keywordflow">break</span>;</div><div class="line">       }</div><div class="line">   }</div><div class="line">}</div></div><!-- fragment --></li>
</ul>
</li>
<li>USB DMA Usage. <br />
<ul>
<li>Step1: Call <a class="el" href="group___u_s_b.html#ga9e3f479659f40a6f6f6c65125dd76c2f" title="This function allocates a USB DMA channel For more information on the number of DMA channels on the L...">hal_usb_get_dma_channel()</a> to get a DMA channel.</li>
<li>Step2: Call <a class="el" href="group___u_s_b.html#ga102cb687c7fb8a130490ba2e1fd78359" title="This function sets up the USB DMA channel to transfer data. ">hal_usb_start_dma_channel()</a> to start the DMA.</li>
<li>Step3: Call <a class="el" href="group___u_s_b.html#ga0cc99daaa38f3099b982ad8302690ad1" title="This function stops the USB DMA channel and clears pending DMA interrupts. ">hal_usb_stop_dma_channel()</a> to stop the DMA.</li>
<li>Step4: Call <a class="el" href="group___u_s_b.html#ga7d880f894b89eb1b55f04937d4e73a1e" title="This function frees a USB DMA channel resource. ">hal_usb_release_dma_channel()</a> to free the DMA channel. <div class="fragment"><div class="line"><span class="keywordtype">void</span> USB_DMA_Example(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> ep_tx_num = 1;</div><div class="line">    <span class="keywordtype">int</span> ep_rx_num = 1;</div><div class="line">    <span class="keywordtype">int</span> ep_num = 0;</div><div class="line">    <span class="keywordtype">int</span> nCount= <a class="code" href="group___u_s_b.html#gabe6f994d46f5b6d44a6b964c5fc5e195">hal_usb_get_rx_packet_length</a>(ep_num);</div><div class="line">    uint8_t data[512];</div><div class="line">    <span class="keywordtype">bool</span> tx_rx_use_the_same_dma_channel = <span class="keyword">false</span>;</div><div class="line">    <span class="keywordtype">bool</span> clear_dma_running_by_myself = <span class="keyword">false</span>;</div><div class="line">    <a class="code" href="group__hal__usb__typedefs.html#gaf0d48aa6118959b019cb1bd03fe310ea">hal_usb_dma_handler_t</a> callback_fun = NULL;</div><div class="line"></div><div class="line">    <span class="comment">//============================================</span></div><div class="line">    <span class="comment">//Allocate DMA channels and configure the DMA.</span></div><div class="line">    <span class="comment">//============================================</span></div><div class="line">    <span class="comment">//Get TX channel.</span></div><div class="line">    <a class="code" href="group___u_s_b.html#ga9e3f479659f40a6f6f6c65125dd76c2f">hal_usb_get_dma_channel</a>(ep_tx_num, NULL, HAL_USB_EP_TX_DIR, tx_rx_use_the_same_dma_channel);</div><div class="line">    <span class="comment">//Get RX channel.</span></div><div class="line">    <a class="code" href="group___u_s_b.html#ga9e3f479659f40a6f6f6c65125dd76c2f">hal_usb_get_dma_channel</a>(NULL, ep_rx_num, HAL_USB_EP_RX_DIR, tx_rx_use_the_same_dma_channel);</div><div class="line">    <span class="comment">//Setup the DMA.</span></div><div class="line">    <a class="code" href="group___u_s_b.html#ga102cb687c7fb8a130490ba2e1fd78359">hal_usb_start_dma_channel</a>(ep_num, HAL_USB_EP_TX_DIR, HAL_USB_ENDPT_BULK, data, nCount, callback_fun, clear_dma_running_by_myself, <a class="code" href="group__hal__usb__enum.html#ggab7fe16b337a52ceb6414c7cf4c0297d1a60adc91e0d72d375ca5311a2d3291022">HAL_USB_DMA1_TYPE</a>);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//Do something if you need</span></div><div class="line">    <span class="comment">//.............</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//====================================</span></div><div class="line">    <span class="comment">//Query the DMA status.</span></div><div class="line">    <span class="comment">//====================================</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___u_s_b.html#gadb8746cd8579a648223b2352c5109189">hal_usb_is_dma_running</a>())</div><div class="line">         printf(<span class="stringliteral">&quot;USB DMA is in progress.\n&quot;</span>);</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">         printf(<span class="stringliteral">&quot;USB DMA is complete.\n&quot;</span>);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//Do something if you need</span></div><div class="line">    <span class="comment">//.............</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//==================================</span></div><div class="line">    <span class="comment">//Stop and release DMA channels.</span></div><div class="line">    <span class="comment">//==================================</span></div><div class="line">    <span class="comment">//Stop the DMA.</span></div><div class="line">    <a class="code" href="group___u_s_b.html#ga0cc99daaa38f3099b982ad8302690ad1">hal_usb_stop_dma_channel</a>(ep_num, HAL_USB_EP_TX_DIR);</div><div class="line">    <span class="comment">//Free the TX channel.</span></div><div class="line">    <a class="code" href="group___u_s_b.html#ga7d880f894b89eb1b55f04937d4e73a1e">hal_usb_release_dma_channel</a>(ep_tx_num, NULL, HAL_USB_EP_TX_DIR, tx_rx_use_the_same_dma_channel);</div><div class="line">    <span class="comment">//Free the RX channel.</span></div><div class="line">    <a class="code" href="group___u_s_b.html#ga7d880f894b89eb1b55f04937d4e73a1e">hal_usb_release_dma_channel</a>(NULL, ep_rx_num, HAL_USB_EP_RX_DIR, tx_rx_use_the_same_dma_channel);</div><div class="line">}</div></div><!-- fragment --> </li>
</ul>
</li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad8a705bd71f6790b70028c0f140b7d83"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gad8a705bd71f6790b70028c0f140b7d83">hal_usb_init</a> (void)</td></tr>
<tr class="memdesc:gad8a705bd71f6790b70028c0f140b7d83"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initializes the USB hardware module.  <a href="#gad8a705bd71f6790b70028c0f140b7d83">More...</a><br /></td></tr>
<tr class="separator:gad8a705bd71f6790b70028c0f140b7d83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5eca82ee5e05b25605a66b9d833913c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga5eca82ee5e05b25605a66b9d833913c6">hal_usb_configure_driver</a> (void)</td></tr>
<tr class="memdesc:ga5eca82ee5e05b25605a66b9d833913c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initializes the USB HAL driver.  <a href="#ga5eca82ee5e05b25605a66b9d833913c6">More...</a><br /></td></tr>
<tr class="separator:ga5eca82ee5e05b25605a66b9d833913c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb109a6d2b465f988b514a52f71093e3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gadb109a6d2b465f988b514a52f71093e3">hal_usb_register_driver_callback</a> (<a class="el" href="group__hal__usb__enum.html#gad0a28abc9ec7f63d5eae70993fb2fa31">hal_usb_driver_handler_type_t</a> type, uint32_t ep_num, <a class="el" href="group__hal__usb__typedefs.html#ga3b0dfce49651ea96c34457f273e6e7ca">hal_usb_driver_interrupt_handler_t</a> hdlr)</td></tr>
<tr class="memdesc:gadb109a6d2b465f988b514a52f71093e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function registers a callback function.  <a href="#gadb109a6d2b465f988b514a52f71093e3">More...</a><br /></td></tr>
<tr class="separator:gadb109a6d2b465f988b514a52f71093e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0c8b8e69464d85a0ccc4af5624674b43"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga0c8b8e69464d85a0ccc4af5624674b43">hal_usb_pull_up_dp_line</a> (void)</td></tr>
<tr class="memdesc:ga0c8b8e69464d85a0ccc4af5624674b43"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function pulls the USB DP pin to high.  <a href="#ga0c8b8e69464d85a0ccc4af5624674b43">More...</a><br /></td></tr>
<tr class="separator:ga0c8b8e69464d85a0ccc4af5624674b43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9070ba013bc663322da617603de752ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga9070ba013bc663322da617603de752ae">hal_usb_reset_hardware</a> (void)</td></tr>
<tr class="memdesc:ga9070ba013bc663322da617603de752ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function applies the USB hardware soft reset.  <a href="#ga9070ba013bc663322da617603de752ae">More...</a><br /></td></tr>
<tr class="separator:ga9070ba013bc663322da617603de752ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabdc7f181d54cad49bb7128795710ace8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gabdc7f181d54cad49bb7128795710ace8">hal_usb_reset_fifo</a> (void)</td></tr>
<tr class="memdesc:gabdc7f181d54cad49bb7128795710ace8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function applies USB FIFO address reset at all endpoints.  <a href="#gabdc7f181d54cad49bb7128795710ace8">More...</a><br /></td></tr>
<tr class="separator:gabdc7f181d54cad49bb7128795710ace8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga956a8ffe2f14cb2498a431abb738a313"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga956a8ffe2f14cb2498a431abb738a313">hal_usb_deinit</a> (void)</td></tr>
<tr class="memdesc:ga956a8ffe2f14cb2498a431abb738a313"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function releases the USB hardware resource.  <a href="#ga956a8ffe2f14cb2498a431abb738a313">More...</a><br /></td></tr>
<tr class="separator:ga956a8ffe2f14cb2498a431abb738a313"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1cf6a5db9726175e2da540bfc8dd2253"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga1cf6a5db9726175e2da540bfc8dd2253">hal_usb_set_address</a> (uint8_t addr, <a class="el" href="group__hal__usb__enum.html#gac1c6f098b46b3e3b3cc9677a7055800e">hal_usb_set_address_state_t</a> state)</td></tr>
<tr class="memdesc:ga1cf6a5db9726175e2da540bfc8dd2253"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function configures the USB address.  <a href="#ga1cf6a5db9726175e2da540bfc8dd2253">More...</a><br /></td></tr>
<tr class="separator:ga1cf6a5db9726175e2da540bfc8dd2253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4a410fb736f33b557330b44c5d46fab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gab4a410fb736f33b557330b44c5d46fab">hal_usb_init_tx_endpoint</a> (uint32_t ep_num, uint16_t data_size, <a class="el" href="group__hal__usb__enum.html#gae669ab4d877cda486950ecf326800656">hal_usb_endpoint_transfer_type_t</a> type, bool double_fifo)</td></tr>
<tr class="memdesc:gab4a410fb736f33b557330b44c5d46fab"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initializes the USB endpoint in TX direction.  <a href="#gab4a410fb736f33b557330b44c5d46fab">More...</a><br /></td></tr>
<tr class="separator:gab4a410fb736f33b557330b44c5d46fab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3df1cbd7de9ef58ad8b37777489f2007"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga3df1cbd7de9ef58ad8b37777489f2007">hal_usb_init_rx_endpoint</a> (uint32_t ep_num, uint16_t data_size, <a class="el" href="group__hal__usb__enum.html#gae669ab4d877cda486950ecf326800656">hal_usb_endpoint_transfer_type_t</a> type, bool double_fifo)</td></tr>
<tr class="memdesc:ga3df1cbd7de9ef58ad8b37777489f2007"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initialize the USB endpoint in RX direction.  <a href="#ga3df1cbd7de9ef58ad8b37777489f2007">More...</a><br /></td></tr>
<tr class="separator:ga3df1cbd7de9ef58ad8b37777489f2007"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac6b4d7c9a96ee41b1ffd8c6558eb12b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gac6b4d7c9a96ee41b1ffd8c6558eb12b2">hal_usb_enable_tx_endpoint</a> (uint32_t ep_num, <a class="el" href="group__hal__usb__enum.html#gae669ab4d877cda486950ecf326800656">hal_usb_endpoint_transfer_type_t</a> ep_type, <a class="el" href="group__hal__usb__enum.html#ga5f0b8667d9b50c62ec334c98e5d79c6c">hal_usb_dma_usage_t</a> dma_usage_type, bool is_flush)</td></tr>
<tr class="memdesc:gac6b4d7c9a96ee41b1ffd8c6558eb12b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function enables the USB endpoint TX interrupt.  <a href="#gac6b4d7c9a96ee41b1ffd8c6558eb12b2">More...</a><br /></td></tr>
<tr class="separator:gac6b4d7c9a96ee41b1ffd8c6558eb12b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga55618518eb2ce44acd880b454fd940e2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga55618518eb2ce44acd880b454fd940e2">hal_usb_enable_rx_endpoint</a> (uint32_t ep_num, <a class="el" href="group__hal__usb__enum.html#gae669ab4d877cda486950ecf326800656">hal_usb_endpoint_transfer_type_t</a> ep_type, <a class="el" href="group__hal__usb__enum.html#ga5f0b8667d9b50c62ec334c98e5d79c6c">hal_usb_dma_usage_t</a> dma_usage_type, bool is_flush)</td></tr>
<tr class="memdesc:ga55618518eb2ce44acd880b454fd940e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function enables the USB endpoint RX interrupt.  <a href="#ga55618518eb2ce44acd880b454fd940e2">More...</a><br /></td></tr>
<tr class="separator:ga55618518eb2ce44acd880b454fd940e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97abff1bae8bfe6e338e0735a967d697"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga97abff1bae8bfe6e338e0735a967d697">hal_usb_disable_tx_endpoint</a> (uint32_t ep_num)</td></tr>
<tr class="memdesc:ga97abff1bae8bfe6e338e0735a967d697"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function disables the USB endpoint TX interrupt.  <a href="#ga97abff1bae8bfe6e338e0735a967d697">More...</a><br /></td></tr>
<tr class="separator:ga97abff1bae8bfe6e338e0735a967d697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga78487a2a85bc59715b46cf5f23bdcc44"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga78487a2a85bc59715b46cf5f23bdcc44">hal_usb_disable_rx_endpoint</a> (uint32_t ep_num)</td></tr>
<tr class="memdesc:ga78487a2a85bc59715b46cf5f23bdcc44"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function disables the USB endpoint RX interrupt.  <a href="#ga78487a2a85bc59715b46cf5f23bdcc44">More...</a><br /></td></tr>
<tr class="separator:ga78487a2a85bc59715b46cf5f23bdcc44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd8e0f60562650db2ed768980be1e9cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gacd8e0f60562650db2ed768980be1e9cc">hal_usb_clear_tx_endpoint_data_toggle</a> (uint32_t ep_num)</td></tr>
<tr class="memdesc:gacd8e0f60562650db2ed768980be1e9cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function clears the TX endpoint data toggle.  <a href="#gacd8e0f60562650db2ed768980be1e9cc">More...</a><br /></td></tr>
<tr class="separator:gacd8e0f60562650db2ed768980be1e9cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab2a47873f7531f63938b36bddbe94d8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gab2a47873f7531f63938b36bddbe94d8b">hal_usb_clear_rx_endpoint_data_toggle</a> (uint32_t ep_num)</td></tr>
<tr class="memdesc:gab2a47873f7531f63938b36bddbe94d8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function clears the TX endpoint data toggle.  <a href="#gab2a47873f7531f63938b36bddbe94d8b">More...</a><br /></td></tr>
<tr class="separator:gab2a47873f7531f63938b36bddbe94d8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaee62d7029bdacd64599348bc05ea6863"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gaee62d7029bdacd64599348bc05ea6863">hal_usb_read_endpoint_fifo</a> (uint32_t ep_num, uint16_t nBytes, void *pDst)</td></tr>
<tr class="memdesc:gaee62d7029bdacd64599348bc05ea6863"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function reads the USB data from FIFO.  <a href="#gaee62d7029bdacd64599348bc05ea6863">More...</a><br /></td></tr>
<tr class="separator:gaee62d7029bdacd64599348bc05ea6863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga44bd3c1a6c7d3d5752bd48f4a116a10d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga44bd3c1a6c7d3d5752bd48f4a116a10d">hal_usb_write_endpoint_fifo</a> (uint32_t ep_num, uint16_t nBytes, void *pSrc)</td></tr>
<tr class="memdesc:ga44bd3c1a6c7d3d5752bd48f4a116a10d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function writes the USB data to FIFO.  <a href="#ga44bd3c1a6c7d3d5752bd48f4a116a10d">More...</a><br /></td></tr>
<tr class="separator:ga44bd3c1a6c7d3d5752bd48f4a116a10d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab1b78bc6734893f746c432bbc3403cca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gab1b78bc6734893f746c432bbc3403cca">hal_usb_set_endpoint_stall</a> (uint32_t ep_num, <a class="el" href="group__hal__usb__enum.html#gaf17839f1e971e3639987d78f5c0f0412">hal_usb_endpoint_direction_t</a> direction, bool stall_enable)</td></tr>
<tr class="memdesc:gab1b78bc6734893f746c432bbc3403cca"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets the USB endpoint n to stall, flush or clear data toggle.  <a href="#gab1b78bc6734893f746c432bbc3403cca">More...</a><br /></td></tr>
<tr class="separator:gab1b78bc6734893f746c432bbc3403cca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga837ba7e895191b5bc7389e43c46e60dd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga837ba7e895191b5bc7389e43c46e60dd">hal_usb_get_endpoint_stall_status</a> (uint32_t ep_num, <a class="el" href="group__hal__usb__enum.html#gaf17839f1e971e3639987d78f5c0f0412">hal_usb_endpoint_direction_t</a> direction)</td></tr>
<tr class="memdesc:ga837ba7e895191b5bc7389e43c46e60dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function queries the stall status of the USB endpoint n.  <a href="#ga837ba7e895191b5bc7389e43c46e60dd">More...</a><br /></td></tr>
<tr class="separator:ga837ba7e895191b5bc7389e43c46e60dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae6fa8408e42725292beada4f98931855"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gae6fa8408e42725292beada4f98931855">hal_usb_get_endpoint_0_status</a> (bool *p_transaction_end, bool *p_sent_stall)</td></tr>
<tr class="memdesc:gae6fa8408e42725292beada4f98931855"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function gets the USB control pipe hardware status.  <a href="#gae6fa8408e42725292beada4f98931855">More...</a><br /></td></tr>
<tr class="separator:gae6fa8408e42725292beada4f98931855"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga838a0397cfd31dfc1607cb926fc92465"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga838a0397cfd31dfc1607cb926fc92465">hal_usb_update_endpoint_0_state</a> (<a class="el" href="group__hal__usb__enum.html#gae51951fca4cef7641a5c8a59dc8be43f">hal_usb_endpoint_0_driver_state_t</a> state, bool stall, bool end)</td></tr>
<tr class="memdesc:ga838a0397cfd31dfc1607cb926fc92465"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets the USB control pipe hardware status.  <a href="#ga838a0397cfd31dfc1607cb926fc92465">More...</a><br /></td></tr>
<tr class="separator:ga838a0397cfd31dfc1607cb926fc92465"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe6f994d46f5b6d44a6b964c5fc5e195"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gabe6f994d46f5b6d44a6b964c5fc5e195">hal_usb_get_rx_packet_length</a> (uint32_t ep_num)</td></tr>
<tr class="memdesc:gabe6f994d46f5b6d44a6b964c5fc5e195"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function gets the data packet length at the RX endpoint.  <a href="#gabe6f994d46f5b6d44a6b964c5fc5e195">More...</a><br /></td></tr>
<tr class="separator:gabe6f994d46f5b6d44a6b964c5fc5e195"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0dac054d8c02c14d238b742bb3a37f56"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga0dac054d8c02c14d238b742bb3a37f56">hal_usb_set_endpoint_tx_ready</a> (uint32_t ep_num)</td></tr>
<tr class="memdesc:ga0dac054d8c02c14d238b742bb3a37f56"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets the USB packet ready once the data is fully written into FIFO.  <a href="#ga0dac054d8c02c14d238b742bb3a37f56">More...</a><br /></td></tr>
<tr class="separator:ga0dac054d8c02c14d238b742bb3a37f56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1b3ac35aa6e9cb6d60b6978dc2063c3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gae1b3ac35aa6e9cb6d60b6978dc2063c3">hal_usb_set_endpoint_rx_ready</a> (uint32_t ep_num)</td></tr>
<tr class="memdesc:gae1b3ac35aa6e9cb6d60b6978dc2063c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets the USB packet ready once the data is fully read from FIFO.  <a href="#gae1b3ac35aa6e9cb6d60b6978dc2063c3">More...</a><br /></td></tr>
<tr class="separator:gae1b3ac35aa6e9cb6d60b6978dc2063c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac4302aded68bef5420a0a769374f48b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gac4302aded68bef5420a0a769374f48b9">hal_usb_clear_tx_endpoint_fifo</a> (uint32_t ep_num, <a class="el" href="group__hal__usb__enum.html#gae669ab4d877cda486950ecf326800656">hal_usb_endpoint_transfer_type_t</a> ep_type, bool b_reset_toggle)</td></tr>
<tr class="memdesc:gac4302aded68bef5420a0a769374f48b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function flushes data packet in the TX FIFO and clears data toggle by request.  <a href="#gac4302aded68bef5420a0a769374f48b9">More...</a><br /></td></tr>
<tr class="separator:gac4302aded68bef5420a0a769374f48b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga22ad548f73df2b2433e67778e0a53ad2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga22ad548f73df2b2433e67778e0a53ad2">hal_usb_clear_rx_endpoint_fifo</a> (uint32_t ep_num, <a class="el" href="group__hal__usb__enum.html#gae669ab4d877cda486950ecf326800656">hal_usb_endpoint_transfer_type_t</a> ep_type, bool b_reset_toggle)</td></tr>
<tr class="memdesc:ga22ad548f73df2b2433e67778e0a53ad2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function flushes data packet in RX FIFO and clears the data toggle by request.  <a href="#ga22ad548f73df2b2433e67778e0a53ad2">More...</a><br /></td></tr>
<tr class="separator:ga22ad548f73df2b2433e67778e0a53ad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e3f479659f40a6f6f6c65125dd76c2f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga9e3f479659f40a6f6f6c65125dd76c2f">hal_usb_get_dma_channel</a> (uint32_t ep_tx_num, uint32_t ep_rx_num, <a class="el" href="group__hal__usb__enum.html#gaf17839f1e971e3639987d78f5c0f0412">hal_usb_endpoint_direction_t</a> direction, bool same_chan)</td></tr>
<tr class="memdesc:ga9e3f479659f40a6f6f6c65125dd76c2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function allocates a USB DMA channel For more information on the number of DMA channels on the LinkIt platform for RTOS, please refer to <a class="el" href="group__hal__usb__define.html#gae4497c2df5bc56dd3f3b675a6c66fde0" title="The maximum number of USB endpoints. ">HAL_USB_MAX_NUMBER_ENDPOINT</a>.  <a href="#ga9e3f479659f40a6f6f6c65125dd76c2f">More...</a><br /></td></tr>
<tr class="separator:ga9e3f479659f40a6f6f6c65125dd76c2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7d880f894b89eb1b55f04937d4e73a1e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga7d880f894b89eb1b55f04937d4e73a1e">hal_usb_release_dma_channel</a> (uint32_t ep_tx_num, uint32_t ep_rx_num, <a class="el" href="group__hal__usb__enum.html#gaf17839f1e971e3639987d78f5c0f0412">hal_usb_endpoint_direction_t</a> direction, bool same_chan)</td></tr>
<tr class="memdesc:ga7d880f894b89eb1b55f04937d4e73a1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function frees a USB DMA channel resource.  <a href="#ga7d880f894b89eb1b55f04937d4e73a1e">More...</a><br /></td></tr>
<tr class="separator:ga7d880f894b89eb1b55f04937d4e73a1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga102cb687c7fb8a130490ba2e1fd78359"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga102cb687c7fb8a130490ba2e1fd78359">hal_usb_start_dma_channel</a> (uint32_t ep_num, <a class="el" href="group__hal__usb__enum.html#gaf17839f1e971e3639987d78f5c0f0412">hal_usb_endpoint_direction_t</a> direction, <a class="el" href="group__hal__usb__enum.html#gae669ab4d877cda486950ecf326800656">hal_usb_endpoint_transfer_type_t</a> ep_type, void *addr, uint32_t length, <a class="el" href="group__hal__usb__typedefs.html#gaf0d48aa6118959b019cb1bd03fe310ea">hal_usb_dma_handler_t</a> callback, bool callback_upd_run, <a class="el" href="group__hal__usb__enum.html#gab7fe16b337a52ceb6414c7cf4c0297d1">hal_usb_dma_type_t</a> dma_type)</td></tr>
<tr class="memdesc:ga102cb687c7fb8a130490ba2e1fd78359"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets up the USB DMA channel to transfer data.  <a href="#ga102cb687c7fb8a130490ba2e1fd78359">More...</a><br /></td></tr>
<tr class="separator:ga102cb687c7fb8a130490ba2e1fd78359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0cc99daaa38f3099b982ad8302690ad1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga0cc99daaa38f3099b982ad8302690ad1">hal_usb_stop_dma_channel</a> (uint32_t ep_num, <a class="el" href="group__hal__usb__enum.html#gaf17839f1e971e3639987d78f5c0f0412">hal_usb_endpoint_direction_t</a> direction)</td></tr>
<tr class="memdesc:ga0cc99daaa38f3099b982ad8302690ad1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function stops the USB DMA channel and clears pending DMA interrupts.  <a href="#ga0cc99daaa38f3099b982ad8302690ad1">More...</a><br /></td></tr>
<tr class="separator:ga0cc99daaa38f3099b982ad8302690ad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb8746cd8579a648223b2352c5109189"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gadb8746cd8579a648223b2352c5109189">hal_usb_is_dma_running</a> (uint32_t ep_num, <a class="el" href="group__hal__usb__enum.html#gaf17839f1e971e3639987d78f5c0f0412">hal_usb_endpoint_direction_t</a> direction)</td></tr>
<tr class="memdesc:gadb8746cd8579a648223b2352c5109189"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function queries the DMA execution status.  <a href="#gadb8746cd8579a648223b2352c5109189">More...</a><br /></td></tr>
<tr class="separator:gadb8746cd8579a648223b2352c5109189"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaead724775ba65c70ebb8c6079391d1bd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gaead724775ba65c70ebb8c6079391d1bd">hal_usb_is_high_speed</a> (void)</td></tr>
<tr class="memdesc:gaead724775ba65c70ebb8c6079391d1bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function queries current USB speed.  <a href="#gaead724775ba65c70ebb8c6079391d1bd">More...</a><br /></td></tr>
<tr class="separator:gaead724775ba65c70ebb8c6079391d1bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaff683b36af8fe2b4813fba6eadbb5026"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gaff683b36af8fe2b4813fba6eadbb5026">hal_usb_is_endpoint_tx_empty</a> (uint32_t ep_num)</td></tr>
<tr class="memdesc:gaff683b36af8fe2b4813fba6eadbb5026"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function checks if the TX endpoint FIFO is empty or not.  <a href="#gaff683b36af8fe2b4813fba6eadbb5026">More...</a><br /></td></tr>
<tr class="separator:gaff683b36af8fe2b4813fba6eadbb5026"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5cca7e68434f38106f3c07cf1f33a4f1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#ga5cca7e68434f38106f3c07cf1f33a4f1">hal_usb_is_endpoint_rx_empty</a> (uint32_t ep_num)</td></tr>
<tr class="memdesc:ga5cca7e68434f38106f3c07cf1f33a4f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function checks if the RX endpoint FIFO is empty or not.  <a href="#ga5cca7e68434f38106f3c07cf1f33a4f1">More...</a><br /></td></tr>
<tr class="separator:ga5cca7e68434f38106f3c07cf1f33a4f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac8158937b89ee3c2c400cafee309e87f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b.html#gac8158937b89ee3c2c400cafee309e87f">hal_usb_enter_test_mode</a> (<a class="el" href="group__hal__usb__enum.html#gafef8f12433154d8f65c4bed380aee656">hal_usb_test_mode_type_t</a> test_selector)</td></tr>
<tr class="memdesc:gac8158937b89ee3c2c400cafee309e87f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets the USB hardware into test mode.  <a href="#gac8158937b89ee3c2c400cafee309e87f">More...</a><br /></td></tr>
<tr class="separator:gac8158937b89ee3c2c400cafee309e87f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__hal__usb__define"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__usb__define.html">Define</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__hal__usb__enum"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__usb__enum.html">Enum.</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__hal__usb__typedefs"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__usb__typedefs.html">Typedefs.</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gab2a47873f7531f63938b36bddbe94d8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_clear_rx_endpoint_data_toggle </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function clears the TX endpoint data toggle. </p>
<p>It's to force the endpoint data toggle to switch and the data packet to be cleared from the FIFO, regardless if the acknowledgement was received. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number to clear data toggle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void USB_endpoint_disable (void)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  int ep_num = 1;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  hal_usb_clear_rx_endpoint_data_toggle(ep_num);</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ga22ad548f73df2b2433e67778e0a53ad2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_clear_rx_endpoint_fifo </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gae669ab4d877cda486950ecf326800656">hal_usb_endpoint_transfer_type_t</a>&#160;</td>
          <td class="paramname"><em>ep_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>b_reset_toggle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function flushes data packet in RX FIFO and clears the data toggle by request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_type</td><td>is the endpoint type defined in USB 2.0 Specification, such as CTRL, BULK, INTR, ISO endpoint. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">b_reset_toggle</td><td>is set to true to execute clear data toggle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void usb_fifo_flush(void)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;       int ep_num = 1;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;       bool clear_data_toggle = false;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;       hal_usb_clear_rx_endpoint_fifo(ep_num, HAL_USB_ENDPT_BULK, clear_data_toggle);</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="gacd8e0f60562650db2ed768980be1e9cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_clear_tx_endpoint_data_toggle </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function clears the TX endpoint data toggle. </p>
<p>It's to force the endpoint data toggle to switch and the data packet to be cleared from the FIFO, regardless if the acknowledgement was received. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number to clear data toggle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void USB_endpoint_disable (void)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  int ep_num = 1;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  hal_usb_clear_tx_endpoint_data_toggle(ep_num);</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="gac4302aded68bef5420a0a769374f48b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_clear_tx_endpoint_fifo </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gae669ab4d877cda486950ecf326800656">hal_usb_endpoint_transfer_type_t</a>&#160;</td>
          <td class="paramname"><em>ep_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>b_reset_toggle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function flushes data packet in the TX FIFO and clears data toggle by request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_type</td><td>is the endpoint type defined in USB 2.0 Specification, such as CTRL, BULK, INTR, ISO endpoint. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">b_reset_toggle</td><td>is set to true to execute clear data toggle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void usb_fifo_flush(void)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;       int ep_num = 1;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;       bool clear_data_toggle = false;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;       hal_usb_clear_tx_endpoint_fifo(ep_num, HAL_USB_ENDPT_BULK, clear_data_toggle);</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ga5eca82ee5e05b25605a66b9d833913c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_configure_driver </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initializes the USB HAL driver. </p>
<p>This function will initialize all required parameters, callback function and endpoint information in USB HAL driver. </p><dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to "Initial USB hardware" in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga956a8ffe2f14cb2498a431abb738a313"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_deinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function releases the USB hardware resource. </p>
<p>This function deinitializes the USB hardware, sets the USB hardware in low power mode and releases the USB related clock tree and power source. </p><dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to "De-initialize the USB hardware" in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga78487a2a85bc59715b46cf5f23bdcc44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_disable_rx_endpoint </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function disables the USB endpoint RX interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number to disable. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void USB_endpoint_disable (void)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  int ep_num = 1;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  hal_usb_disable_rx_endpoint(ep_num);</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ga97abff1bae8bfe6e338e0735a967d697"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_disable_tx_endpoint </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function disables the USB endpoint TX interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number to disable. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void USB_endpoint_disable (void)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  int ep_num = 1;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  hal_usb_disable_tx_endpoint(ep_num);</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ga55618518eb2ce44acd880b454fd940e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_enable_rx_endpoint </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gae669ab4d877cda486950ecf326800656">hal_usb_endpoint_transfer_type_t</a>&#160;</td>
          <td class="paramname"><em>ep_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#ga5f0b8667d9b50c62ec334c98e5d79c6c">hal_usb_dma_usage_t</a>&#160;</td>
          <td class="paramname"><em>dma_usage_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_flush</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function enables the USB endpoint RX interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint to initialize. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_type</td><td>is the endpoint type defined in USB 2.0 Specification. Such as CTRL, BULK, INTR, ISO endpoint. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dma_usage_type</td><td>is set to PIO or DMA mode. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_flush</td><td>flushes the USB FIFO data when the function is executed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to "USB endpoint setup" in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="gac6b4d7c9a96ee41b1ffd8c6558eb12b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_enable_tx_endpoint </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gae669ab4d877cda486950ecf326800656">hal_usb_endpoint_transfer_type_t</a>&#160;</td>
          <td class="paramname"><em>ep_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#ga5f0b8667d9b50c62ec334c98e5d79c6c">hal_usb_dma_usage_t</a>&#160;</td>
          <td class="paramname"><em>dma_usage_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_flush</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function enables the USB endpoint TX interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint to initialize. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_type</td><td>is the endpoint type defined in USB 2.0 Specification, such as CTRL, BULK, INTR, ISO endpoint. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dma_usage_type</td><td>is set to PIO or DMA mode. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_flush</td><td>flushes the USB FIFO data when the function is executed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to "USB endpoint setup" in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="gac8158937b89ee3c2c400cafee309e87f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_enter_test_mode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gafef8f12433154d8f65c4bed380aee656">hal_usb_test_mode_type_t</a>&#160;</td>
          <td class="paramname"><em>test_selector</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets the USB hardware into test mode. </p>
<p>To activate a test mode, the USB 2.0 Specification defines the SET_FEATURE command as the desired interface. The USB-IF offers a free High Speed electrical Test Tool (HSET) for Microsoft Windows OS, to activate the various test modes and operations </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">test_selector</td><td>select the test function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void usb_test_mode(void)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;       hal_usb_enter_test_mode(HAL_USB_TEST_MODE_TYPE_J);</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;       hal_usb_enter_test_mode(HAL_USB_TEST_MODE_TYPE_K);</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;       hal_usb_enter_test_mode(HAL_USB_TEST_MODE_TYPE_SE0_NAK);</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;       hal_usb_enter_test_mode(HAL_USB_TEST_MODE_TYPE_PACKET);</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; }</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ga9e3f479659f40a6f6f6c65125dd76c2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_get_dma_channel </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_tx_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_rx_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gaf17839f1e971e3639987d78f5c0f0412">hal_usb_endpoint_direction_t</a>&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>same_chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function allocates a USB DMA channel For more information on the number of DMA channels on the LinkIt platform for RTOS, please refer to <a class="el" href="group__hal__usb__define.html#gae4497c2df5bc56dd3f3b675a6c66fde0" title="The maximum number of USB endpoints. ">HAL_USB_MAX_NUMBER_ENDPOINT</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_tx_num</td><td>is the endpoint number in TX direction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_rx_num</td><td>is the endpoint number in RX direction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">direction</td><td>is the USB endpoint direction. This parameter is ignored, if the same channel is used. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">same_chan</td><td>the TX and RX use the same DMA channel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>An example implementation can be found in "USB DMA Usage." in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="gae6fa8408e42725292beada4f98931855"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_get_endpoint_0_status </td>
          <td>(</td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>p_transaction_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>p_sent_stall</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function gets the USB control pipe hardware status. </p>
<p>p_transaction_end: This bit is set when a control transaction ends before the DataEnd bit is set. An interrupt will be generated and the FIFO flushed. p_sent_stall: This bit is set when a STALL handshake is transmitted. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">p_transaction_end</td><td>is the result of control pipe transaction end. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_sent_stall</td><td>is the result of control pipe sent stall. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void USB_Endpoint0_Hdlr(void)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;   bool b_transaction_end;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;   bool b_sent_stall;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;   hal_usb_get_endpoint_0_status(&amp;b_transaction_end, &amp;b_sent_stall);</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ga837ba7e895191b5bc7389e43c46e60dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hal_usb_get_endpoint_stall_status </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gaf17839f1e971e3639987d78f5c0f0412">hal_usb_endpoint_direction_t</a>&#160;</td>
          <td class="paramname"><em>direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function queries the stall status of the USB endpoint n. </p>
<p>It is usually used to response to the host endpoint 0 command: GET_STATUS </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">direction</td><td>is the USB endpoint direction. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True, if stall is enabled. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code please refers to "USB Endpoint0 Handler" in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void USB_Endpoint0_Hdlr(void)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  int ep_num = 1;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  bool status;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  status = (uint16_t)hal_usb_get_endpoint_stall_status(ep_num, HAL_USB_EP_TX_DIR);</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="gabe6f994d46f5b6d44a6b964c5fc5e195"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t hal_usb_get_rx_packet_length </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function gets the data packet length at the RX endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the length of packet size in bytes. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>For an example implementation, please refer to "USB PIO data read" in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="gad8a705bd71f6790b70028c0f140b7d83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initializes the USB hardware module. </p>
<p>Call this function before using the USB service. It also enables the USB related clock tree and power source. </p><dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to "Initialize the USB hardware" in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga3df1cbd7de9ef58ad8b37777489f2007"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_init_rx_endpoint </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gae669ab4d877cda486950ecf326800656">hal_usb_endpoint_transfer_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>double_fifo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initialize the USB endpoint in RX direction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint to initialize. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_size</td><td>is the maximum packet size at this endpoint. For more details about maximum packet size, please refer to USB 2.0 Specification. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>is the endpoint type defined in USB 2.0 Specification, such as CTRL, BULK, INTR, ISO endpoint. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">double_fifo</td><td>allocates two FIFO buffers, if double_fifo is enabled. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to "USB endpoint setup" in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="gab4a410fb736f33b557330b44c5d46fab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_init_tx_endpoint </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gae669ab4d877cda486950ecf326800656">hal_usb_endpoint_transfer_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>double_fifo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initializes the USB endpoint in TX direction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint to initialize. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_size</td><td>is the maximum packet size at this endpoint. For more details about maximum packet size, please refer to USB 2.0 Specification. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>is the endpoint type defined in USB 2.0 Specification, such as CTRL, BULK, INTR, ISO endpoint. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">double_fifo</td><td>two FIFO buffers are allocated, if double_fifo is enabled. It may cost more FIFO SRAM. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to "USB endpoint setup" in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="gadb8746cd8579a648223b2352c5109189"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hal_usb_is_dma_running </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gaf17839f1e971e3639987d78f5c0f0412">hal_usb_endpoint_direction_t</a>&#160;</td>
          <td class="paramname"><em>direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function queries the DMA execution status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">direction</td><td>is the USB endpoint direction. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True, if the DMA is running. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>An example implementation can be found in "USB DMA Usage." in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga5cca7e68434f38106f3c07cf1f33a4f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hal_usb_is_endpoint_rx_empty </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function checks if the RX endpoint FIFO is empty or not. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>False, if there is data in FIFO pending to read. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void query_fifo_status(void)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;       int ep_num = 1;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;       if (hal_usb_is_endpoint_rx_empty(ep_num))</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;          printf(&quot;USB rx FIFO is empty\n&quot;);</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;       else</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;          printf(&quot;USB rx FIFO still has data\n&quot;);</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="gaff683b36af8fe2b4813fba6eadbb5026"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hal_usb_is_endpoint_tx_empty </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function checks if the TX endpoint FIFO is empty or not. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>False, if there is data in FIFO pending to send. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void query_fifo_status(void)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;       int ep_num = 1;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;       if (hal_usb_is_endpoint_tx_empty(ep_num))</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;          printf(&quot;USB tx FIFO is empty\n&quot;);</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;       else</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;          printf(&quot;USB tx FIFO still has data\n&quot;);</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="gaead724775ba65c70ebb8c6079391d1bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hal_usb_is_high_speed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function queries current USB speed. </p>
<dl class="section return"><dt>Returns</dt><dd>True, if using high-speed USB. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void get_usb_speed(void)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;       if (hal_usb_is_high_speed())</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;          printf(&quot;USB is high speed mode\n&quot;);</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;       else</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;          printf(&quot;USB is full speed mode\n&quot;);</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ga0c8b8e69464d85a0ccc4af5624674b43"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_pull_up_dp_line </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function pulls the USB DP pin to high. </p>
<p>It starts the USB connection flow. For more details on DP, please refer to the USB 2.0 Specification. </p><dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to "Initialize the USB hardware" in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="gaee62d7029bdacd64599348bc05ea6863"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_read_endpoint_fifo </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>nBytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pDst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function reads the USB data from FIFO. </p>
<p>Reading from these addresses unloads data from the RX FIFO for the corresponding endpoint. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nBytes</td><td>is the number of bytes to read. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pDst</td><td>is a pointer to the destination. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code please refers to "USB PIO data read." in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="gadb109a6d2b465f988b514a52f71093e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_register_driver_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gad0a28abc9ec7f63d5eae70993fb2fa31">hal_usb_driver_handler_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__typedefs.html#ga3b0dfce49651ea96c34457f273e6e7ca">hal_usb_driver_interrupt_handler_t</a>&#160;</td>
          <td class="paramname"><em>hdlr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function registers a callback function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>is the interrupt handler type. Please refer to <a class="el" href="group__hal__usb__enum.html#gad0a28abc9ec7f63d5eae70993fb2fa31" title="Interrupt handler type. ">hal_usb_driver_handler_type_t</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number. The interrupt handler must be binding to a specific endpoint number if it uses <a class="el" href="group__hal__usb__enum.html#ggad0a28abc9ec7f63d5eae70993fb2fa31a76deca0f207a43288759ca44ebe0108e" title="USB endpoint n TX callback function. ">HAL_USB_DRV_HDLR_EP_TX</a> and <a class="el" href="group__hal__usb__enum.html#ggad0a28abc9ec7f63d5eae70993fb2fa31a8c671394471cbd33da220934beaf94e4" title="USB endpoint n RX callback function. ">HAL_USB_DRV_HDLR_EP_RX</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hdlr</td><td>is the callback function. Please refer to <a class="el" href="group__hal__usb__typedefs.html#ga3b0dfce49651ea96c34457f273e6e7ca" title="Interrupt handler function type. ">hal_usb_driver_interrupt_handler_t</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to "Initialize the USB hardware" in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga7d880f894b89eb1b55f04937d4e73a1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_release_dma_channel </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_tx_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_rx_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gaf17839f1e971e3639987d78f5c0f0412">hal_usb_endpoint_direction_t</a>&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>same_chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function frees a USB DMA channel resource. </p>
<p>For more information on the number of DMA channels on the LinkIt platform for RTOS, please refer to <a class="el" href="group__hal__usb__define.html#gae4497c2df5bc56dd3f3b675a6c66fde0" title="The maximum number of USB endpoints. ">HAL_USB_MAX_NUMBER_ENDPOINT</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_tx_num</td><td>is the endpoint number in TX direction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_rx_num</td><td>is the endpoint number in RX direction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">direction</td><td>is the USB endpoint direction. This parameter is ignored, if the same channel is used. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">same_chan</td><td>the TX and RX use the same DMA channel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>An example implementation can be found in "USB DMA Usage." in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="gabdc7f181d54cad49bb7128795710ace8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_reset_fifo </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function applies USB FIFO address reset at all endpoints. </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to "Initialize the USB hardware" in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9070ba013bc663322da617603de752ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_reset_hardware </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function applies the USB hardware soft reset. </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to "Initialize the USB hardware" in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga1cf6a5db9726175e2da540bfc8dd2253"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_set_address </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gac1c6f098b46b3e3b3cc9677a7055800e">hal_usb_set_address_state_t</a>&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function configures the USB address. </p>
<p>In the USB 2.0 Specifications, the USB address is set by the USB control pipe. The address is 1~127(7-bits). This address should be written with the address received through a SET_ADDRESS command, which will then be used for decoding the function address in subsequent token packets. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>the USB address set by the USB control pipe through a SET_ADDRESS command. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>the current state for the set address function. The address writes to hardware only in HAL_USB_SET_ADDR_STATUS state. It must make sure the SET_ADDRESS command is completed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to "USB Endpoint0 Handler" in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="gae1b3ac35aa6e9cb6d60b6978dc2063c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_set_endpoint_rx_ready </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets the USB packet ready once the data is fully read from FIFO. </p>
<p>Hardware issues an interrupt if RX endpoint received a packet. Hardware will start to receive the next packet if data is read from FIFO and RX packet is set to ready. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>For an example implementation, please refer to "USB PIO data read." in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="gab1b78bc6734893f746c432bbc3403cca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_set_endpoint_stall </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gaf17839f1e971e3639987d78f5c0f0412">hal_usb_endpoint_direction_t</a>&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>stall_enable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets the USB endpoint n to stall, flush or clear data toggle. </p>
<p>This function is used to execute (1) endpoint stall, (2) FIFO flush and (3) clear data toggle. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">direction</td><td>is the USB endpoint direction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stall_enable</td><td>enables or disables the stall operation. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code please refers to "USB Endpoint0 Handler" in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0dac054d8c02c14d238b742bb3a37f56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_set_endpoint_tx_ready </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets the USB packet ready once the data is fully written into FIFO. </p>
<p>Hardware will send the packet out if data is written to the FIFO and the TX packet is set to ready. Null length packet (ZLP) will be sent if the data is not written to the FIFO. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code please refers to "USB PIO data write." in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga102cb687c7fb8a130490ba2e1fd78359"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_start_dma_channel </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gaf17839f1e971e3639987d78f5c0f0412">hal_usb_endpoint_direction_t</a>&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gae669ab4d877cda486950ecf326800656">hal_usb_endpoint_transfer_type_t</a>&#160;</td>
          <td class="paramname"><em>ep_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__typedefs.html#gaf0d48aa6118959b019cb1bd03fe310ea">hal_usb_dma_handler_t</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>callback_upd_run</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gab7fe16b337a52ceb6414c7cf4c0297d1">hal_usb_dma_type_t</a>&#160;</td>
          <td class="paramname"><em>dma_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets up the USB DMA channel to transfer data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">direction</td><td>is the USB endpoint direction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_type</td><td>is the endpoint type defined in USB 2.0 Specification. Such as CTRL, BULK, INTR, ISO endpoint. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>is a pointer to the address to apply the DMA transaction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>is the data length in bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>is called once the DMA transaction is complete. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback_upd_run</td><td>configures the DMA running state. Set true, if application callback function requests to clear the DMA running by itself. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dma_type</td><td>executes a single packet operation or multiple packets operation, <a class="el" href="group__hal__usb__enum.html#gab7fe16b337a52ceb6414c7cf4c0297d1" title="USB DMA usage type. ">hal_usb_dma_type_t</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>An example implementation can be found in "USB DMA Usage." in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0cc99daaa38f3099b982ad8302690ad1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_stop_dma_channel </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gaf17839f1e971e3639987d78f5c0f0412">hal_usb_endpoint_direction_t</a>&#160;</td>
          <td class="paramname"><em>direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function stops the USB DMA channel and clears pending DMA interrupts. </p>
<p>After that, drop data in FIFO. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">direction</td><td>is the USB endpoint direction. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>An example implementation can be found in "USB DMA Usage." in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga838a0397cfd31dfc1607cb926fc92465"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_update_endpoint_0_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__hal__usb__enum.html#gae51951fca4cef7641a5c8a59dc8be43f">hal_usb_endpoint_0_driver_state_t</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>stall</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets the USB control pipe hardware status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>is the endpoint0 hardware control state. Please refer to <a class="el" href="group__hal__usb__enum.html#gae51951fca4cef7641a5c8a59dc8be43f" title="Endpoint 0 hardware control state. ">hal_usb_endpoint_0_driver_state_t</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stall</td><td>is set to true to execute endpoint stall. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">end</td><td>is set to true to execute transaction end. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;// It shows 3 examples in this function call.</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;void USB_Endpoint0_State(void)</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;{</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;   bool transaction_end;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;   bool sent_stall;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;   //example1: read data end and stall this transaction.</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;   sent_stall = true;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;   transaction_end = false;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;   hal_usb_update_endpoint_0_state(HAL_USB_EP0_DRV_STATE_READ_END, sent_stall, transaction_end);</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;   //example2: write data ready and set this transaction completed.</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;   sent_stall = false;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;   transaction_end = true;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;   hal_usb_update_endpoint_0_state(HAL_USB_EP0_DRV_STATE_WRITE_RDY, sent_stall, transaction_end);</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;   //example3: transaction end and clear the transaction_end hardware status.</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;   sent_stall = false;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;   transaction_end = true;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;   hal_usb_update_endpoint_0_state(HAL_USB_EP0_DRV_STATE_TRANSACTION_END, sent_stall, transaction_end);</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ga44bd3c1a6c7d3d5752bd48f4a116a10d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__usb__enum.html#gaad643a8e642fd4a05a63682893236062">hal_usb_status_t</a> hal_usb_write_endpoint_fifo </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ep_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>nBytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pSrc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function writes the USB data to FIFO. </p>
<p>Writing to these addresses loads data into the TX FIFO for the corresponding endpoint. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_num</td><td>is the endpoint number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nBytes</td><td>is the number of bytes to write. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pSrc</td><td>is a pointer to the source. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__usb__enum.html#ggaad643a8e642fd4a05a63682893236062a817def6874c0d4f3fe725a2a03eeccb2" title="The function call was successful. ">HAL_USB_STATUS_OK</a>, if the operation completed successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code please refers to "USB PIO data write." in <a class="el" href="group___u_s_b.html#HAL_USB_Driver_Usage_Chapter">How to use this driver.</a>. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Nov 15 2017 19:29:11 for MT2523 API Reference by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
